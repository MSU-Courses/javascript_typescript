# Основы классов

В рамках изучения объектно-ориентированного программирования Вы уже рассматривали понятие классов и их функциональное назначение. 

В контексте JavaScript классы функционируют с некоторыми особенностями.

Классы были введены в JS со стандарта ES6 (2015 год).

В данном разделе мы затронем лишь основные моменты, и более подробно поговорим о классах в контексте TypeScript позже.

> [!NOTE]
> `Класс` в программировании можно представить как шаблон или чертёж для создания объектов. Он определяет свойства (характеристики) и методы (действия), которые могут быть применены к объектам этого класса. Классы помогают организовать код, делая его более структурированным и понятным для разработчиков.

## Определение класса

Для определения класса используется ключевое слово `class`.

```js
class Player {
    // тело класса
};

// class expression
const player = class {
    // тело класса
}
```

## Создание экземпляра

Для создания экземпляра класса в JavaScript используется ключевое слово `new`. Вы уже сталкивались с ним, при рассмотрении темы[функции-конструктора](63_constructor_new.md).

```js
const player = new Player();
```

## Поля, методы и конструктор класса

Поля (свойства) класса подразделяются на 2 уровня доступа (2 модификатора доступа):

- public (публичные),
- private (приватные).

Эти понятия вам уже знакомы из курса объектно-ориентированного программирования. 

Для обозначения приватного модификаторов доступа используются символ `#` перед именем свойства:

```js
class Player {
    username;   // публичное (public) свойство
    #address;   // приватное (private) свойство
}
```

Для определения конструктора используется ключевое слово `construct`.

```js
class Player  {
    username;
    #address;
    #hp = 100; // начальное значение

    /**
     * Конструктор класса Player
     * @param username Имя игрока
     * @param address Адресс игрока
     */
    constructor(username, address) {
        this.username = username;
        this.#address = address;
    }
}

const player = new Player("Alex", "105 Big Hill");
console.log(player.username); // "Alex"
console.log(player.#address); // Error: Property '#address' is not accessible outside class 'Player' because it has a private identifier.
```

Методы объявляются также, как и в других языках программирования.

```js
class Player {
    username;
    #hp = 100;

    /**
     * Приветствие игрока
     */
    greet() { // публичный метод
        console.log(`Hello, i'm ${this.username}`);
    }

    /**
     * Уменьшение HP на 20
     */
    #reduceHP() { // приватный метод
        this.#hp -= 20;
    }
}
```

## Инициализация полей через конструктор

Редко вы увидите объявление полей таким образом, как было показано выше, так как это часто излишне. Вместо этого, все поля обычно определяются в конструкторе.

Однако, стоит отметить, что в конструкторе можно определить только публичные поля, в то время как все приватные поля следует определять в начале класса.

```js
class Player {
    constructor(username, address) {
        this.username = username;
        // this.#address = address; // так нельзя
    }
}

const player = new Player("Alex", 20);
console.log(player.username); // Alex
```

## Что такое класс в JS?

Давайте создадим класс и посмотрим, каким типом он является:

```js
class Player {
}
typeof Player; // 'function'
```

И да, не удивляйтесь. 

В JavaScript классы,- это **функция**.

Почему в JavaScript классы представляют собой функции? Давайте вспомним тему, изученную ранее, которая называется [функции-конструкторы](63_constructor_new.md).

Когда мы объявляем класс, например `class Player { }`, происходит следующее:

1. JavaScript создает функцию `Player()` с кодом из конструктора `constructor`.
2. Путем наследования (о чем мы поговорим позже), все методы из класса сохраняются в объект.

```js
class Player {
    constructor() {
        this.name = "Alex";
        this.age = 2;
    }
}

// по сути то же самое, что и
function Player() {
    this.name = "Alex";
    this.age = 2;
}
```

Таким образом, классы, это просто _синтаксический сахар_.