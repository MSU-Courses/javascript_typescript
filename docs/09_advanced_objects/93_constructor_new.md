# Конструктор объектов и оператор `new`

# Конструктор объектов и оператор `new`

В предыдущих разделах мы создавали объекты, используя фигурные скобки `{ ... }`. Однако у этого способа есть один недостаток: невозможность создания объектов по определенному шаблону, что заставляет повторять один и тот же код вручную.

```javascript
const player1 = {
    username: "...",
    age: "...",
};

const player2 = {
    username: "...",
    age: "...",
};
```

Этот метод неплохой, но ограничивает Вас в создании объектов одинакового типа.

## Функция-конструктор

Из курса ООП вы уже узнали, что такое конструктор. В JavaScript функция-конструктор немного отличается от обычного конструктора в ООП, хоть сама концепция и похожа.

Помните что такое конструктор?

> [!NOTE]
> **Конструктор в объектно-ориентированном программировании** (ООП) - это специальный метод, который вызывается автоматически при создании объекта класса.

> [!NOTE]
> В JavaScript функция-конструктор используется для создания новых объектов с определёнными свойствами и методами.

Сами по себе `функции-конструкторы` в JS - это обычные функции, но есть два правила.

1. Функция-конструктор должна называться с большой буквы.
2. Функция-конструктор должна вызываться с помощью слова `new`.

```js
function Player(username, age) {
    this.username = username;
    this.age = age;
    this.greet = function() {
        return `Hi, my name is ${this.username}`;
    };
}

// Создаем два объекта `Player`
const player1 = new Player("Alex", 22);
const player2 = new Player("Robert", 18);

// player: { username: "Alex", age: 22 }
console.log(player1);
// player: { username: "Robert", age: 18 }
console.log(player2);
```

> [!NOTE]
> Ключевое слово `new` в JavaScript используется для создания экземпляра объекта с использованием функции-конструктора.

Теперь необходимо понять, **как работает функция-конструктор**.
1. Создается новый пустой объект, который затем присваивается ключевому слову this.
2. Выполняются инструкции внутри соответствующей функции-конструктора, которая может устанавливать свойства объекта через this.
3. Затем возвращается объект this, который содержит созданные свойства и методы.

Действия [`1`] и [`2`] происходят неявно, то есть мы не пишем их явно в коде, что делает его более чистым и компактным.

```js
function Player(username, age) {
    // this = {};
       
    this.username = username;
    this.age = age;
    
    // return this;
}
```

Думаю, теперь понятно, зачем используются функции-конструкторы: мы можем создавать множество объектов с помощью одной функции.

## Использования слово `return`

Вы можете использовать ключевое слово `return` в функции-конструкторе, однако в этом случае объект, связанный с ключевым словом `this`, не будет возвращаться.

```javascript
function Player(username, age) {
    this.username = username;
    this.age = age;
    return {
        username: "Alex",
        age: 23,
    };
}

// player: { username: "Alex", age: 23 }
// поскольку мы используем ключевое слово `return` и возвращаем другой объект
const player = new Player("John", 34);
```